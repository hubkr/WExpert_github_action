<UserControl
    x:Class="WExpert.Controls.USViewerControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    SizeChanged="UserControl_SizeChanged"
    xmlns:behaviors="using:WExpert.Binding.Behavior"
    xmlns:effects="using:Microsoft.Graphics.Canvas.Effects"
    xmlns:converter="using:WExpert.Binding.Converter">

    <UserControl.Resources>
        <converter:CommonConverter x:Key="commonConverter"/>
    </UserControl.Resources>
    
    <ScrollViewer x:Name="ScrollViewer"
                  HorizontalScrollBarVisibility="Auto" 
                  VerticalScrollBarVisibility="Auto"
                  ViewChanged="ScrollViewer_ViewChanged"
                  MinZoomFactor="0.1"
                  MaxZoomFactor="5"
                  ZoomMode="Disabled"
                  PointerWheelChanged="ScrollViewer_PointerWheelChanged"
                  PointerEntered="ScrollViewer_PointerEntered"
                  PointerExited="ScrollViewer_PointerExited"
                  PointerPressed="ScrollViewer_PointerPressed"
                  PointerReleased="ScrollViewer_PointerReleased"
                  PointerMoved="ScrollViewer_PointerMoved">
        <Grid Background="Transparent"
              VerticalAlignment="Center"
              HorizontalAlignment="Center">

            <Viewbox Stretch="Uniform">
                <Grid x:Name="usImageGrd">                                            
                    <!-- 이미지 반전 및 회전 참고 코드
                    <Grid.RenderTransform>
                        <CompositeTransform Rotation="90" 
                                            TranslateX="{Binding ActualWidth, ElementName=ScrollViewer}"
                                            TranslateY="{Binding ActualHeight, ElementName=ScrollViewer}" />
                    </Grid.RenderTransform>     
                    -->
                    
                    <Image x:Name="usImage"
                           Stretch="Uniform"
                           Source="{x:Bind DisplaySource, Mode=OneWay, Converter={StaticResource commonConverter}, ConverterParameter='NullImageCheck'}"/>

                    <Grid x:Name="usImageBackground" Background="Black" Visibility="Collapsed"
                          VerticalAlignment="Stretch"
                          HorizontalAlignment="Stretch"/>
                    
                    <Canvas Name="HeatMapCanvas"
                            VerticalAlignment="Stretch"
                            HorizontalAlignment="Stretch"/>
                </Grid>
            </Viewbox>
        </Grid>
    </ScrollViewer>
</UserControl>
